{%- if request.page_type == 'index' -%}<div class="yotpo yotpo-pictures-widget" data-gallery-id=""></div>{%- endif -%}
{{ 'section-footer.css' | asset_url | stylesheet_tag }}
{{ 'component-accordion.css' | asset_url | stylesheet_tag }}

<link rel="stylesheet" href="{{ 'component-newsletter.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-list-payment.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-list-social.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-rte.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'disclosure.css' | asset_url }}" media="print" onload="this.media='all'">

<noscript>{{ 'component-newsletter.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-list-menu.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-list-payment.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-list-social.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-rte.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'disclosure.css' | asset_url | stylesheet_tag }}</noscript>

{% capture margin_size %}
  {% if section.settings.display_margins %}
    {{ settings.margin_size }}
  {% else %}
    0
  {% endif %}
{% endcapture %}

{% capture mobile_margin_size %}
  {% if section.settings.display_margins %}
    {{ settings.mobile_margin_size }}
  {% else %}
    0
  {% endif %}
{% endcapture %}

{% style %}
#shopify-section-{{ section.id }} {
  margin-top: {{ margin_size | divided_by: 10 }}rem;
  margin-bottom: {{ margin_size | divided_by: 10 }}rem;
}
@media screen and (max-width: 750px) {
  #shopify-section-{{ section.id }} {
    margin-top: {{ mobile_margin_size | divided_by: 10 }}rem;
    margin-bottom: {{ mobile_margin_size | divided_by: 10 }}rem;
  }
}
{% endstyle %}

<!-- Microsite logic (RX site) -->
{% assign isMicrositePage = false %}

{% if page.metafields.cql.rx_microsite != blank and page.metafields.cql.rx_microsite != false %}
  {% assign isMicrositePage = true %}
{% endif %}

<footer class="footer" style="background-color: {{ section.settings.section_background_color }}">
  {%- if section.blocks.size > 0 or section.settings.newsletter_enable or section.settings.show_social -%}
    <div class="footer__content-top page-width">
      {%- if section.blocks.size > 0 -%}
        {%- liquid
          if section.blocks.size == 9
            assign footer_grid_class = 'grid--3-col-tablet'
          elsif section.blocks.size > 6
            assign footer_grid_class = 'grid--4-col-desktop'
          elsif section.blocks.size > 4
            assign footer_grid_class = 'grid--3-col-tablet'
          endif
        -%}
        <div class="footer__blocks-wrapper grid grid--1-col grid--2-col grid--4-col-tablet grid--5-col-desktop {{ footer_grid_class }}">
          {% if section.settings.logo_image or section.settings.logo_text != blank %}
            <div class="footer-block grid__item footer-block--logo{% if isMicrositePage %} footer-block--logo-microsite{% endif %}">
              {% if section.settings.logo_image %}
                <div class="footer-block--logo-img">
                {%- assign image_size = section.settings.logo_image.width | append: 'x' -%}
                {% render 'image', image: section.settings.logo_image, alt: section.settings.logo_image.alt %}
                </div>
              {% endif %}

              {%- if section.settings.logo_text != blank -%}
                <div class="footer-block--logo__text">
                  {{ section.settings.logo_text }}
                </div>
              {%- endif -%}
              
              {%- if section.settings.company_info != blank -%}
                <div class="footer-block--company_info">
                  {{ section.settings.company_info }}
                </div>
              {%- endif -%}

                <ul class="footer__list-social list-unstyled list-social footer-desktop--socials small-hide medium-hide" role="list">
                  {%- if section.settings.social_select == 'standard' -%}
                    {%- render 'footer-social-media', microsite: false -%}
                  {%- else -%}
                    {%- render 'footer-social-media', microsite: true -%}
                  {%- endif -%}
                </ul>
            </div>
          {% endif %}

          <ul class="footer__list-social list-unstyled list-social footer-desktop--socials large-up-hide" role="list">
            {%- if section.settings.social_select == 'standard' -%}
              {%- render 'footer-social-media', microsite: false -%}
            {%- else -%}
              {%- render 'footer-social-media', microsite: true -%}
            {%- endif -%}
          </ul>
          
          <div class="footer__icon-menu">
          {%- for i in (1..3) -%}
            {%- assign cmIcon = "icon__cm-" | append: i -%}
            {%- assign cmLabel = "label__cm-" | append: i -%}
            {%- assign cmLink = "link__cm-" | append: i -%}
            {%- if section.settings[cmLabel] != blank and section.settings[cmLink] != blank -%}
              <div class="footer__icon-menu--item">
                {%- assign iconVal = section.settings[cmIcon] -%}
                <div class="footer__icon-menu--icon">{%- render 'icons', icon: iconVal-%}</div>
                <a href="{{ section.settings[cmLink] }}" class="footer__icon-menu--label">{{ section.settings[cmLabel] }}</a>
              </div>
            {%- endif -%}
          {%- endfor -%}
          </div>

          {%- for block in section.blocks -%}
            {%- if block.type == 'link_list' and block.settings.heading != blank -%}
              <div class="accordion accordion-{{ forloop.index }} large-up-hide {% if forloop.last %}footer__accordion--border-bottom{% endif %}" {{ block.shopify_attributes }}>
                <details>
                  <summary>
                    <h3 class="h4 accordion__title footer-block__heading">{{ block.settings.heading | escape }}</h3>{% render 'icon-caret' %}
                  </summary>
                  {%- if block.settings.menu != blank -%}
                  <ul class="footer-block__details-content list-unstyled accordion_content">
                    {%- for link in block.settings.menu.links -%}
                    <li>
                      <a href="{{ link.url }}"
                        class="link link--text list-menu__item list-menu__item--link{% if link.active %} list-menu__item--active{% endif %}">
                        {{- link.title -}}
                      </a>
                    </li>
                    {%- endfor -%}
                  </ul>
                  {%- endif -%}
                </details>
              </div>
            {%- endif -%}

            <div class="footer-block grid__item{% if block.type == 'link_list' %} footer-block--menu medium-hide small-hide{% endif %}{% if isMicrositePage %} footer-block--microsite{% endif %}" {{ block.shopify_attributes }}>
              {%- if block.settings.heading != blank -%}
                <h3 class="footer-block__heading">{{- block.settings.heading | escape -}}</h3>
              {%- elsif block.type == 'link_list' and block.settings.menu != blank -%}
                <h3 class="footer-block__heading">{{- block.settings.menu.title | escape -}}</h3>
              {%- endif -%}

              {%- case block.type -%}
                {%- when 'text' -%}
                  <div class="footer-block__details-content rte">
                    {{ block.settings.subtext }}
                  </div>
                {%- when 'link_list' -%}
                  {%- if block.settings.menu != blank -%}
                    <ul class="footer-block__details-content list-unstyled">
                      {%- for link in block.settings.menu.links -%}
                        <li>
                          <a href="{{ link.url }}" class="link link--text list-menu__item list-menu__item--link{% if link.active %} list-menu__item--active{% endif %}">
                            {{- link.title -}}
                          </a>
                        </li>
                      {%- endfor -%}
                    </ul>
                  {%- endif -%}
                {%- when 'image' -%}
                  <div class="footer-block__details-content footer-block-image {{ block.settings.alignment }}">
                    {%- if block.settings.image != blank -%}
                      {% assign img_style = 'max-width: min(100%, ' | append: block.settings.image_width | append: 'px);' %}
                      {% render 'image', image: block.settings.image, image_desired_width: 400, alt: block.settings.image.alt, style: img_style %}
                    {%- else -%}
                      {{ 'image' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
                    {%- endif -%}
                  </div>
                {%- endcase -%}
            </div>
          {%- endfor -%}

        </div>
      {%- endif -%}
    </div>
  {%- endif -%}

  {% if section.settings.enable_country_selector or settings.enable_language_selector %}
    <div class="footer__content-bottom">
      <div class="footer__content-bottom-wrapper page-width">
        <div class="footer__column footer__localization">
          <div class="footer__localization--wrapper">
            {%- if section.settings.enable_country_selector and localization.available_countries.size > 1 -%}
              <noscript>
                {%- form 'localization', id: 'FooterCountryFormNoScript', class: 'localization-form' -%}
                  <div class="localization-form__select">
                    <h2 class="visually-hidden" id="FooterCountryLabelNoScript">{{ 'localization.country_label' | t }}</h2>
                    <select class="localization-selector link" name="country_code" aria-labelledby="FooterCountryLabelNoScript">
                      {%- for country in localization.available_countries -%}
                        <option value="{{ country.iso_code }}" {%- if country.iso_code == localization.country.iso_code %} selected{% endif %}>
                          {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                        </option>
                      {%- endfor -%}
                    </select>
                    {% render 'icon-caret' %}
                  </div>
                  <button class="button button--tertiary">{{ 'localization.update_country' | t }}</button>
                {%- endform -%}
              </noscript>
              <localization-form>
                {%- form 'localization', id: 'FooterCountryForm', class: 'localization-form' -%}
                  <div class="no-js-hidden">
                    <h2 class="caption-large text-body" id="FooterCountryLabel">{{ 'localization.country_label' | t }}</h2>
                    <div class="disclosure">
                      <button type="button" class="disclosure__button localization-form__select localization-selector input--round input--small link link--text caption-large" aria-expanded="false" aria-controls="FooterCountryList" aria-describedby="FooterCountryLabel">
                        {{ localization.country.name }} ({{ localization.country.currency.iso_code }} {{ localization.country.currency.symbol }})
                        {% render 'icon-caret' %}
                      </button>
                      <ul id="FooterCountryList" role="list" class="disclosure__list list-unstyled" hidden>
                        {%- for country in localization.available_countries -%}
                          <li class="disclosure__item" tabindex="-1">
                            <a class="link link--text disclosure__link caption-large{% if country.iso_code == localization.country.iso_code %} disclosure__link--active{% endif %} focus-inset" href="#"{% if country.iso_code == localization.country.iso_code %} aria-current="true"{% endif %} data-value="{{ country.iso_code }}">
                              {{ country.name }} <span class="localization-form__currency">({{ country.currency.iso_code }} {{ country.currency.symbol }})</span>
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    </div>
                    <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}">
                  </div>
                {%- endform -%}
              </localization-form>
            {%- endif -%}
          </div>

          <div class="app-settings__wrapper">
            {% if section.settings.app_description != blank %}
              <div class="app-settings__block app-settings__description">
                <div class="app-rte__wrap">
                  {{ section.settings.app_description | replace: '<p>', '<p class="app-rte">' }}
                </div>
              </div>
            {% endif %}

            {% if section.settings.app_label_one != blank %}
              <div class="app-settings__block app-settings__link-wrap">
                <a
                  class="app-settings__link button button--primary-black button--small button--round"
                  {% if section.settings.app_link_one != blank %}href="{{ section.settings.app_link_two }}"{% endif %}>
                  {% render 'icon-download' %}
                  {{ section.settings.app_label_one }}
                </a>
              </div>
            {% endif %}

            {% if section.settings.app_label_two != blank %}
              <div class="app-settings__block app-settings__link-wrap">
                <a
                  class="app-settings__link button button--primary-black button--small button--round"
                  {% if section.settings.app_link_two != blank %}href="{{ section.settings.app_link_two }}"{% endif %}>
                  {% render 'icon-download' %}
                  {{ section.settings.app_label_two }}
                </a>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  <div class="footer__column" style="background-color: {{ section.settings.copyright_background_color }}">
    <div class="footer__column--info page-width">
      {% if section.settings.copyright_menu %}
        <div class="copyright__linklist">
          {% for link in section.settings.copyright_menu.links %}
          <a href="{{ link.url }}">{{ link.title }}</a>{% unless forloop.last %}<p {% if section.settings.copyright_menu_display_mobile == 'column' %}class="small-hide medium-hide"{% endif %}>|</p>{% endunless %}
          {% endfor %}
        </div>
      {% endif %}

      {%- if section.settings.payment_enable -%}
        <div class="footer__payment">
          <span class="visually-hidden">{{ 'sections.footer.payment' | t }}</span>
          <ul class="list list-payment" role="list">
            {%- for type in shop.enabled_payment_types -%}
              <li class="list-payment__item">
                {{ type | payment_type_svg_tag: class: 'icon icon--full-color' }}
              </li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
      <div class="footer__copyright caption">
        <p class="copyright__content"><span class="copyright-rte">&copy; {{ 'now' | date: "%Y" }}</span> {{ section.settings.copyright_text | replace: '<p>', '<span class="copyright-rte">' | replace: '</p>', '</span>' }}</p>
      </div>
    </div>
  </div>
</footer>

{% style %}

@media screen and (max-width: 989px) {
  div.copyright__linklist {
    flex-direction: {{ section.settings.copyright_menu_display_mobile }};
  }
}

{% endstyle%}


{% schema %}
{
  "name": "t:sections.footer.name",
  "blocks": [
    {
      "type": "link_list",
      "name": "t:sections.footer.blocks.link_list.name",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Quick links",
          "label": "t:sections.footer.blocks.link_list.settings.heading.label",
          "info": "t:sections.footer.blocks.link_list.settings.heading.info"
        },
        {
          "type": "link_list",
          "id": "menu",
          "default": "footer",
          "label": "t:sections.footer.blocks.link_list.settings.menu.label",
          "info": "t:sections.footer.blocks.link_list.settings.menu.info"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.footer.blocks.text.name",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Heading",
          "label": "t:sections.footer.blocks.text.settings.heading.label"
        },
        {
          "type": "richtext",
          "id": "subtext",
          "default": "<p>Share store details, promotions, or brand content with your customers.</p>",
          "label": "t:sections.footer.blocks.text.settings.subtext.label"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 50,
          "max": 200,
          "step": 5,
          "unit": "px",
          "label": "Image width",
          "default": 100
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "Image alignment on large screen",
          "options": [
            {
              "value": "",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "t:sections.footer.settings.logo_image.label"
    },
    {
      "type": "richtext",
      "id": "logo_text",
      "label": "t:sections.footer.settings.logo_text.label"
    },
    {
      "type": "richtext",
      "id": "company_info",
      "label": "t:sections.footer.settings.company_info.label"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "section_background_color",
      "label": "t:sections.all.colors.background.label"
    },
    {
      "type": "color",
      "id": "copyright_background_color",
      "label": "t:sections.footer.settings.copyright_background.label"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__2.content",
      "info": "t:sections.footer.settings.header__2.info"
    },
    {
      "type": "select",
      "id": "social_select",
      "options": [
      {  "value": "standard",
        "label": "t:sections.footer.settings.social_select.standard.label"
      },
      {
        "value": "microsite",
        "label": "t:sections.footer.settings.social_select.microsite.label" 
      }
      ],
      "default": "standard",
      "label": "t:sections.footer.settings.social_select.label"
    },
    {
      "type": "header",
      "content": "Courtesy Menu Options"
    },
    {
      "type": "select",
      "id": "icon__cm-1",
      "label": "Icon 1",
      "options": [
        {
          "value": "location",
          "label": "Location"
        },
        {
          "value": "information",
          "label": "Information"
        },
        {
          "value": "chat_box",
          "label": "Chatbox"
        },
        {
          "value": "calendar",
          "label": "Calendar" 
        },
        {
          "value": "social_linkedin",
          "label": "LinkedIn"
        }
      ],
      "default": "chat_box"
    },
    {
      "type": "text",
      "id": "label__cm-1",
      "label": "Label 1"
    },
    {
      "type":"url",
      "id": "link__cm-1",
      "label": "Link 1"
    },
    {
      "type": "select",
      "id": "icon__cm-2",
      "label": "Icon 2",
      "options": [
        {
          "value": "location",
          "label": "Location"
        },
        {
          "value": "information",
          "label": "Information"
        },
        {
          "value": "chat_box",
          "label": "Chatbox"
        },
        {
          "value": "calendar",
          "label": "Calendar" 
        },
        {
          "value": "social_linkedin",
          "label": "LinkedIn"
        }
      ],
      "default": "chat_box"
    },
    {
      "type": "text",
      "id": "label__cm-2",
      "label": "Label 2"
    },
    {
      "type":"url",
      "id": "link__cm-2",
      "label": "Link 2"
    },
    {
      "type": "select",
      "id": "icon__cm-3",
      "label": "Icon 3",
      "options": [
        {
          "value": "location",
          "label": "Location"
        },
        {
          "value": "information",
          "label": "Information"
        },
        {
          "value": "chat_box",
          "label": "Chatbox"
        },
        {
          "value": "calendar",
          "label": "Calendar" 
        },
        {
          "value": "social_linkedin",
          "label": "LinkedIn"
        }
      ],
      "default": "chat_box"
    },
    {
      "type": "text",
      "id": "label__cm-3",
      "label": "Label 3"
    },
    {
      "type":"url",
      "id": "link__cm-3",
      "label": "Link 3"
    },
    {
      "type": "header",
      "content": "Copyright"
    },
    {
      "type": "link_list",
      "id": "copyright_menu",
      "label": "Menu"
    },
    {
      "type": "select",
      "id": "copyright_menu_display_mobile",
      "label": "Copyright Menu display (mobile)",
      "options": [
        {
          "value": "column",
          "label": "Column"
        },
        {
          "value": "row",
          "label": "Row"
        }
      ],
      "default": "column"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright Text"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__3.content",
      "info": "t:sections.footer.settings.header__4.info"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": false,
      "label": "t:sections.footer.settings.enable_country_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__5.content",
      "info": "t:sections.footer.settings.header__6.info"
    },
    {
      "type": "checkbox",
      "id": "enable_language_selector",
      "default": false,
      "label": "t:sections.footer.settings.enable_language_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__7.content"
    },
    {
      "type": "checkbox",
      "id": "payment_enable",
      "default": false,
      "label": "t:sections.footer.settings.payment_enable.label"
    },
    {
      "type": "header",
      "content": "Margins",
      "info": "Apply global theme layout margins on the top and bottom"
    },
    {
      "type": "checkbox",
      "id": "display_margins",
      "label": "Display margins",
      "default": false
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "link_list"
      },
      {
        "type": "link_list"
      }
    ]
  }
}
{% endschema %}