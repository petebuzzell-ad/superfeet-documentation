class DetailsDisclosure extends HTMLElement{constructor(){super(),this.addEventListener("keyup",this.onKeyUp),this.mainDetailsToggle=this.querySelector("details"),this.mainDetailsToggle.addEventListener("focusout",this.onFocusOut.bind(this)),this.menuItem=this.mainDetailsToggle.querySelector(".header__menu-item"),this.menuItem.addEventListener("mouseover",this.onHover.bind(this)),this.previousHoverElement=null}onKeyUp(e){if("ESCAPE"!==e.code.toUpperCase())return;const t=e.target.closest("details[open]");if(!t)return;const s=t.querySelector("summary");t.removeAttribute("open"),s.focus()}onFocusOut(){setTimeout(()=>{this.contains(document.activeElement)||this.close()})}onHover(e){const t=e.target.closest(".header__menu-item");t!==this.previousHoverElement&&(this.previousHoverElement=t,e.preventDefault(),this.open(e))}onMenuClose(e){this.contains(e.target)||this.close(!1)}open(e){e.target.closest("nav").querySelectorAll("details").forEach(e=>{e.removeAttribute("open")}),this.onMenuCloseEvent=this.onMenuCloseEvent||this.onMenuClose.bind(this),this.mainDetailsToggle.setAttribute("open",!0),document.body.addEventListener("click",this.onMenuCloseEvent),document.body.addEventListener("mouseover",this.onMenuCloseEvent),trapFocus(this.mainDetailsToggle.querySelector(".header__submenu-contents"))}close(e=!0){this.previousHoverElement=null,removeTrapFocus(e?this.mainDetailsToggle:null),this.mainDetailsToggle.removeAttribute("open"),document.body.removeEventListener("click",this.onMenuCloseEvent)}}customElements.define("details-disclosure",DetailsDisclosure);